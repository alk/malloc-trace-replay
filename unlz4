#!/usr/bin/ruby

if RUBY_PLATFORM =~ /linux/
  F_SETPIPE_SZ = 1031
  STDOUT.fcntl(F_SETPIPE_SZ, 1 << 20) rescue nil
end

if ARGV.size > 0
  STDIN.reopen(ARGV[0], "rb")
end

exec "lz4", "-d"
